<%# locals: { placement_details: nil } -%>
<%= govuk_panel(
  title_text: t(".panel_title"),
  text: t(".panel_text", academic_year_name: @placement_preference.academic_year.short_name),
) %>

<h1 class="govuk-heading-l govuk-!-margin-top-6"><%= t(".what_happens_next") %></h1>

<p class="govuk-body">
  <%= embedded_link_text(
    t(".providers_can_contact_you",
      mailto: mail_to(
         placement_details.dig("school_contact", "email_address"),
      )),
  ) %>
</p>

<p class="govuk-body"><%= t(".you_do_not_need_to_take_any_further_action") %></p>

<p class="govuk-body">
  <%= embedded_link_text(
    t(".you_can_edit_placements",
      link: govuk_link_to(
        t(".edit_your_placements"),
        "",
      )
    ),
  ) %>
</p>

<h2 class="govuk-heading-m">
  <%= t(".your_placements_offers") %>
</h2>

<% if placement_details.dig("year_group_selection", "year_groups").present? %>
  <h3 class="govuk-heading-s">
    <%= t(".primary") %>
  </h3>

  <%= render "placement_preferences/placement_details/primary_placements_list",
    placement_details: placement_details, action_link: nil %>
<% end %>

<% if placement_details.dig("secondary_subject_selection", "subject_ids").present? %>
  <h3 class="govuk-heading-s">
    <%= t(".secondary") %>
  </h3>

  <%= render "placement_preferences/placement_details/secondary_placements_list",
    placement_details: placement_details, action_link: nil %>
<% end %>

<% if placement_details.dig("key_stage_selection", "key_stages").present? %>
  <h3 class="govuk-heading-s">
    <%= t(".send") %>
  </h3>

  <%= render "placement_preferences/placement_details/send_placements_list",
    placement_details: placement_details, action_link: nil %>
<% end %>

<% if placement_details.dig("school_contact", "email_address").present? %>
  <h3 class="govuk-heading-s">
    <%= t(".placement_contact") %>
  </h3>

  <%= render "placement_preferences/placement_details/school_contact_details",
             placement_details: placement_details, action_link: nil %>
<% end %>
